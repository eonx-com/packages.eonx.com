<!DOCTYPE html>
<html lang="en">
<head>
    <title>EonX Docs</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
    <script defer src="https://kit.fontawesome.com/955de18180.js" crossorigin="anonymous"></script>

    <link rel="icon" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512-70x70.png" sizes="32x32">
    <link rel="icon" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512.png" sizes="192x192">
    <link rel="apple-touch-icon-precomposed" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512.png">

                

        <link id="theme-style" rel="stylesheet" href="/assets/css/theme.css">
    

    <link id="theme-style" rel="stylesheet" href="/assets/css/theme.css">
    <link id="theme-style" rel="stylesheet" href="/assets/css/prism.css">
</head>

<div id="app">
        <body class="docs-page">
    <header class="header fixed-top">
        <div class="branding docs-branding">
            <div class="container-fluid position-relative py-2">
                <div class="docs-logo-wrapper">
                    <button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible mr-2 d-xl-none"
                            type="button">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <div class="site-logo">
                        <a class="navbar-brand" href="/">
                            <img class="logo-icon mr-2"
                                 src="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-logo@1x.png"
                                 alt="logo">
                        </a>
                    </div>
                </div><!--//docs-logo-wrapper-->
                <div class="docs-top-utilities d-flex justify-content-end align-items-center">
                    <div class="top-search-box d-none d-lg-flex">
                        <form class="search-form">
                            <input type="text" placeholder="Search the docs..." name="search"
                                   class="form-control search-input">
                            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i>
                            </button>
                        </form>
                    </div>

                                                                                                                                                            </div><!--//docs-top-utilities-->
            </div><!--//container-->
        </div><!--//branding-->
    </header><!--//header-->

        <div class="docs-wrapper">
        <div id="docs-sidebar" class="docs-sidebar">
            <nav id="docs-nav" class="docs-nav navbar">
                <ul class="section-items list-unstyled nav flex-column pb-3">
                    <li class="nav-item section-title">
                        <a class="nav-link scrollto active" href="#intro">
                        <span class="theme-icon-holder mr-2">
                            <i class="fas fa-cubes"></i>
                        </span>
                            eonx-com/easy-notification
                        </a>
                    </li>

                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_readme">
                                
                                Introduction
                            </a>
                        </li>
                                    </ul>
            </nav>
        </div>
        <div class="docs-content">
            <div class="container">
                <article class="docs-article" id="intro">
                    <header class="docs-header">
                                                <h1 class="docs-heading">
                            eonx-com/easy-notification
                            <a href="https://github.com/eonx-com/easy-monorepo"><i class="fa fa-github"></i></a>
                        </h1>
                        <section class="docs-intro">
                            <p>Client for dispatching notifications at EonX</p>
                        </section>
                    </header>

                                            <section class="docs-section" id="eonx-com_easy-notification_readme">
                            <h2 class="section-heading">
                                                                Introduction
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 03:52:35 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/readme.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>This package is made to ease dispatching notifications within EonX Notification service, and works with this service
ONLY.</p>
<h3>Require package (Composer)</h3>
<p>The recommended way to install this package is to use <a href="https://getcomposer.org/">Composer</a>:</p>
<pre><code class="language-bash">$ composer require eonx-com/easy-notification</code></pre>
<p><br></p>
<h3>Configuration</h3>
<p>In order to send notifications using the EonX Notification service, you need to register a Provider within that service.
Once the Provider created, set the API URL the Provider is registered against and keep the Provider API key and external
ID handy as they will be required to send messages.</p>
<p>See the configuration section for your framework of choice. (coming soon...)</p>
<p><br></p>
<h3>Usage</h3>
<p>Once configured this package will fetch the required configuration from the EonX Notification service and register
a <code>EonX\EasyNotification\Interfaces\NotificationClientInterface</code> service into your DI container. You can then inject
this client into your own classes and send notifications:</p>
<pre><code class="language-php">// src/Listener/UserCreatedListener.php

namespace App\Listener;

use App\Entity\User;
use EonX\EasyNotification\Interfaces\ConfigFinderInterface;
use EonX\EasyNotification\Interfaces\NotificationClientInterface;
use EonX\EasyNotification\Messages\RealTimeMessage;

final class UserCreatedListener
{
    /**
     * @var \EonX\EasyNotification\Interfaces\ConfigFinderInterface
     */
    private $configFinder;

    /**
     * @var \EonX\EasyNotification\Interfaces\NotificationClientInterface
     */
    private $client;

    public function __construct(ConfigFinderInterface $configFinder, NotificationClientInterface $client)
    {
        $this-&gt;configFinder = $configFinder;
        $this-&gt;client = $client;
    }

    public function created(User $user): void
    {
        /**
         * In real use case, those values should come from configuration.
         *
         * For multi-tenancies application, it is a best practice to store those values against each tenancy.
         */
        $config = $this-&gt;configFinder-&gt;find('my-api-key', 'my-provider-external-id');

        /**
         * Topics are "channels" to send notifications to.
         * Every clients subscribing to any of the topics will then receive the notification.
         */
        $topics = [$user-&gt;getExternalId()]; // Good practice is to have 1 topic per user

        /**
         * Body is the notification contents each client will receive.
         * Its structure is completely up to the application but should negotiated with subscribers.
         */ 
        $body = [
            'title' =&gt; 'Welcome!',
            'body' =&gt; \sprintf('We are to have you onboard %s', $user-&gt;getUsername()),
        ];

        $this-&gt;client-&gt;send($config, RealTimeMessage::create($body, $topics)); // Send real time message
    }
}</code></pre>

                            <br>
                        </section>
                        <br>
                                    </article>
            </div>
        </div>
    </div>
    </body>
</div>

        

    <script src="/assets/js/jquery-3.4.1.min.js"></script>
    <script src="/assets/js/jquery.scrollTo.min.js"></script>
    <script src="/assets/js/popper.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>


    <script src="/assets/js/docs.js"></script>

    <script>
        $('pre').addClass('line-numbers');

        $(function (){
            $('.code-toolbar').addClass('shadow-sm');
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <script src="/assets/js/prism.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147626313-4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-147626313-4');
</script>
</html>
