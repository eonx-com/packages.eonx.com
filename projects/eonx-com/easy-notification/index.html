<!DOCTYPE html>
<html lang="en">
<head>
    <title>EonX Docs</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
    <script defer src="https://kit.fontawesome.com/955de18180.js" crossorigin="anonymous"></script>

    <link rel="icon" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512-70x70.png" sizes="32x32">
    <link rel="icon" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512.png" sizes="192x192">
    <link rel="apple-touch-icon-precomposed" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512.png">

                

        <link id="theme-style" rel="stylesheet" href="/assets/css/theme.css">
    

    <link id="theme-style" rel="stylesheet" href="/assets/css/theme.css">
    <link id="theme-style" rel="stylesheet" href="/assets/css/prism.css">
</head>

<div id="app">
        <body class="docs-page">
    <header class="header fixed-top">
        <div class="branding docs-branding">
            <div class="container-fluid position-relative py-2">
                <div class="docs-logo-wrapper">
                    <button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible mr-2 d-xl-none"
                            type="button">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <div class="site-logo">
                        <a class="navbar-brand" href="/">
                            <img class="logo-icon mr-2"
                                 src="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-logo@1x.png"
                                 alt="logo">
                        </a>
                    </div>
                </div><!--//docs-logo-wrapper-->
                <div class="docs-top-utilities d-flex justify-content-end align-items-center">
                    <div class="top-search-box d-none d-lg-flex">
                        <form class="search-form">
                            <input type="text" placeholder="Search the docs..." name="search"
                                   class="form-control search-input">
                            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i>
                            </button>
                        </form>
                    </div>

                                                                                                                                                            </div><!--//docs-top-utilities-->
            </div><!--//container-->
        </div><!--//branding-->
    </header><!--//header-->

        <div class="docs-wrapper">
        <div id="docs-sidebar" class="docs-sidebar">
            <nav id="docs-nav" class="docs-nav navbar">
                <ul class="section-items list-unstyled nav flex-column pb-3">
                    <li class="nav-item section-title">
                        <a class="nav-link scrollto active" href="#intro">
                        <span class="theme-icon-holder mr-2">
                            <i class="fas fa-cubes"></i>
                        </span>
                            eonx-com/easy-notification
                        </a>
                    </li>

                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_readme">
                                
                                Introduction
                            </a>
                        </li>
                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_subscribe_info">
                                
                                Subscribe Info
                            </a>
                        </li>
                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_messages">
                                
                                Interact With Messages
                            </a>
                        </li>
                                            <li class="nav-item section-title mt-3">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_slack">
                                                                    <span class="theme-icon-holder mr-2">
                                        <i class="fab fa-slack"></i>
                                    </span>
                                
                                Slack Integration
                            </a>
                        </li>
                                            <li class="nav-item section-title mt-3">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_symfony_install">
                                                                    <span class="theme-icon-holder mr-2">
                                        <i class="fab fa-symfony"></i>
                                    </span>
                                
                                Symfony
                            </a>
                        </li>
                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_symfony_cache_config_finder">
                                
                                CacheConfigFinder In Symfony
                            </a>
                        </li>
                                            <li class="nav-item section-title mt-3">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_laravel_install">
                                                                    <span class="theme-icon-holder mr-2">
                                        <i class="fab fa-laravel"></i>
                                    </span>
                                
                                Laravel/Lumen
                            </a>
                        </li>
                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-notification_docs_laravel_cache_config_finder">
                                
                                CacheConfigFinder In Laravel
                            </a>
                        </li>
                                    </ul>
            </nav>
        </div>
        <div class="docs-content">
            <div class="container">
                <article class="docs-article" id="intro">
                    <header class="docs-header">
                                                <h1 class="docs-heading">
                            eonx-com/easy-notification
                            <a href="https://github.com/eonx-com/easy-monorepo"><i class="fa fa-github"></i></a>
                        </h1>
                        <section class="docs-intro">
                            <p>Client for dispatching notifications at EonX</p>
                        </section>
                    </header>

                                            <section class="docs-section" id="eonx-com_easy-notification_readme">
                            <h2 class="section-heading">
                                                                Introduction
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/readme.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>This package is made to ease dispatching notifications within EonX Notification service, and works with this service
ONLY.</p>
<h3>Require package (Composer)</h3>
<p>The recommended way to install this package is to use <a href="https://getcomposer.org/">Composer</a>:</p>
<pre><code class="language-bash">$ composer require eonx-com/easy-notification</code></pre>
<p><br></p>
<h3>Configuration</h3>
<p>In order to send notifications using the EonX Notification service, you need to register a Provider within that service.
Once the Provider created, set the API URL the Provider is registered against and keep the Provider API key and external
ID handy as they will be required to send messages.</p>
<p>See the configuration section for your framework of choice. (coming soon...)</p>
<p><br></p>
<h3>CacheConfigFinder</h3>
<p>This package will automatically send API requests to the EonX Notification service to fetch the configuration for your
ApiKey and Provider. This will ensure your application has the latest configuration, however, this configuration can
easily be cached as it doesn't change often.</p>
<p>This is why this package provides you with a <code>EonX\EasyNotification\Config\CacheConfigFinder</code> to decorate the default
config finder service and cache the found config.</p>
<p>The <code>EonX\EasyNotification\Config\CacheConfigFinder</code> implementation relies on the <a href="https://symfony.com/doc/current/components/cache.html">Symfony Cache Component</a> so you
will need to make sure it is installed in your project.</p>
<p>See how to override the config caching within your framework of choice section.</p>
<p><br></p>
<h3>Usage</h3>
<p>Once configured this package will fetch the required configuration from the EonX Notification service and register
a <code>EonX\EasyNotification\Interfaces\NotificationClientInterface</code> service into your DI container. You can then inject
this client into your own classes and send notifications:</p>
<pre><code class="language-php">// src/Listener/UserCreatedListener.php

namespace App\Listener;

use App\Entity\User;
use EonX\EasyNotification\Interfaces\ConfigFinderInterface;
use EonX\EasyNotification\Interfaces\NotificationClientInterface;
use EonX\EasyNotification\Messages\RealTimeMessage;

final class UserCreatedListener
{
    /**
     * @var \EonX\EasyNotification\Interfaces\ConfigFinderInterface
     */
    private $configFinder;

    /**
     * @var \EonX\EasyNotification\Interfaces\NotificationClientInterface
     */
    private $client;

    public function __construct(ConfigFinderInterface $configFinder, NotificationClientInterface $client)
    {
        $this-&gt;configFinder = $configFinder;
        $this-&gt;client = $client;
    }

    public function created(User $user): void
    {
        /**
         * In real use case, those values should come from configuration.
         *
         * For multi-tenancies application, it is a best practice to store those values against each tenancy.
         */
        $config = $this-&gt;configFinder-&gt;find('my-api-key', 'my-provider-external-id');

        /**
         * Topics are "channels" to send notifications to.
         * Every clients subscribing to any of the topics will then receive the notification.
         */
        $topics = [$user-&gt;getExternalId()]; // Good practice is to have 1 topic per user

        /**
         * Body is the notification contents each client will receive.
         * Its structure is completely up to the application but should negotiated with subscribers.
         */ 
        $body = [
            'title' =&gt; 'Welcome!',
            'body' =&gt; \sprintf('We are to have you onboard %s', $user-&gt;getUsername()),
        ];

        $this-&gt;client
             -&gt;withConfig($config) // Set config for next send
             -&gt;send(RealTimeMessage::create($body, $topics)); // Send real time message
    }
}</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_subscribe_info">
                            <h2 class="section-heading">
                                                                Subscribe Info
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/subscribe_info.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>For clients to receive real_time messages, they need to subscribe to topics. These subscriptions are secure and require
signed JWTs provided by the EonX Notification service. Each JWT is issued for a restricted list of topics, so a client
can subscribe only to topics listed in its JWT.</p>
<p>Each client MUST request the generation of new subscribe info in order to be able to actually subscribe to topics.
Subscribe info is made of:</p>
<ul>
<li><strong>url</strong>: The URL to subscribe to</li>
<li><strong>topics</strong>: The list of formatted topics to subscribe to</li>
<li><strong>jwt</strong>: The JWT to send as Bearer Token within the subscription request</li>
</ul>
<p><br></p>
<h3>Provide Subscribe Info to clients</h3>
<p>This package provides you with a <code>EonX\EasyNotification\Interfaces\SubscribeInfoFinderInterface</code> service making generating
the subscription info from the EonX Notification service easy. You can use dependency injection to use anywhere you like
in your code.</p>
<p>Here is an example how to generate subscription info within a Symfony Controller:</p>
<pre><code class="language-php">// src/Http/Controller/SubscribeInfoController.php

namespace App\Http\Controller;

use EonX\EasyNotification\Interfaces\SubscribeInfoFinderInterface;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;

final class SubscribeInfoController
{
    /**
     * @var string
     */    
    private $apiKey;

    /**
     * @var string
     */
    private $providerExternalId;

    /**
     * @var \EonX\EasyNotification\Interfaces\SubscribeInfoFinderInterface
     */
    private $subscribeInfoFinder;

    public function __construct(
        string $notificationApiKey, 
        string $notificationProvider, 
        SubscribeInfoFinderInterface $subscribeInfoFinder
    ) {
        $this-&gt;apiKey = $notificationApiKey;
        $this-&gt;providerExternalId = $notificationProvider;
        $this-&gt;subscribeInfoFinder = $subscribeInfoFinder;
    }

    public function __invoke(Request $request)
    {
        // Please do better in your code! :)
        $body = \json_decode($request-&gt;getContent(), true);

        $subscribeInfo = $this-&gt;subscribeInfoFinder-&gt;find(
            $this-&gt;apiKey, 
            $this-&gt;providerExternalId, 
            $body['topics'] // Get topics from request body
        );

        return new JsonResponse([
            'jwt' =&gt; $subscribeInfo-&gt;getJwt(),
            'topics' =&gt; $subscribeInfo-&gt;getTopics(),
            'url' =&gt; $subscribeInfo-&gt;getUrl(),
        ]);
    }
}</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_messages">
                            <h2 class="section-heading">
                                                                Interact With Messages
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/messages.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>Once clients subscribe to topics, they will then receive messages in real time. However, it requires clients to have an
active subscription at the time the message is delivered. </p>
<p>So are all the message delivered when a client inactive lost!?</p>
<p>Lucky no! Every real time message are persisted within the EonX Notification service so clients can retrieve them at
later stage and interact with them. Let's see how you can allow clients to do so using the
<code>EonX\EasyNotification\Interfaces\NotificationClientInterface</code> service in your code.</p>
<p><br></p>
<h3>Setting the Config on the NotificationClient</h3>
<p>The <code>NotificationClientInterface</code> implementation requires the <code>EonX\EasyNotification\Interfaces\ConfigInterface</code> to
successfully interact with the EonX Notification service API.
You can get this <code>ConfigInterface</code> using the <code>EonX\EasyNotification\Interfaces\ConfigFinderInterface</code> service, and then
set it on the <code>NotificationClientInterace</code> using the <code>withConfig()</code> method:</p>
<pre><code class="language-php">/** @var \EonX\EasyNotification\Interfaces\ConfigFinderInterface $configFinder */
/** @var \EonX\EasyNotification\Interfaces\NotificationClientInterface $notificationClient */

$config = $configFinder-&gt;find('my-api-key', 'my-provider');

$notificationClient-&gt;withConfig($config);</code></pre>
<div class="callout-block callout-block-warning"><div class="content"><p>Once the config set on the NotificationClient, it will then be used for every following interactions
with the EonX Notification service API. In multi-tenancies application it can cause undesired behaviour, so be mindful
of how/when you set the Config on the NotificationClient.</p></div></div>
<div class="callout-block callout-block-success"><div class="content"><p>Calling the <code>withConfig()</code> with <code>null</code> as argument will reset the NotificationClient enforcing to set a new Config
before using the NotificationClient again. </p></div></div>
<p><br></p>
<p>All the following sections will be done assuming the <code>ConfigInterface</code> is already set
on the <code>NotificationClientInterace</code> service.</p>
<p><br></p>
<h3>Retrieve messages</h3>
<p>The <code>NotificationClientInterace</code> allows you to retrieve message for specific topics. Optionally, you can pass an array
of options used by the HTTP client. The <a href="https://symfony.com/doc/current/http_client.html">Symfony HTTP Client</a> is used, checkout its documentation for the list of
available options.</p>
<pre><code class="language-php">// src/Http/Controller/NotificationGetMessage.php

namespace App\Http\Controller;

use EonX\EasyNotification\Interfaces\NotificationClientInterface;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;

final class NotificationGetMessage
{
    /**
     * @var \EonX\EasyNotification\Interfaces\NotificationClientInterface
     */
    private $notificationClient;

    public function __construct(NotificationClientInterface $notificationClient) 
    {
        $this-&gt;notificationClient = $notificationClient;
    }

    public function __invoke(Request $request)
    {
        // Please do better in your code! :)
        $body = \json_decode($request-&gt;getContent(), true);

        // Change how many messages to get per page
        $options = ['query' =&gt; ['perPage' =&gt; 100]];

        $response = $this-&gt;notificationClient-&gt;getMessages($body['topics'], $options);

        return new JsonResponse([
            'items' =&gt; $response['items'],
            'pagination' =&gt; $response['pagination'],
        ]);
    }
}</code></pre>
<p><br></p>
<h3>Update messages status</h3>
<p>The <code>NotificationClientInterace</code> allows you to update the status for specific messages. This is useful for the end user
to mark specific messages as read.</p>
<pre><code class="language-php">// src/Http/Controller/NotificationUpdateMessage.php

namespace App\Http\Controller;

use EonX\EasyNotification\Interfaces\NotificationClientInterface;
use EonX\EasyNotification\Messages\RealTimeMessage;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;

final class NotificationUpdateMessage
{
    /**
     * @var \EonX\EasyNotification\Interfaces\NotificationClientInterface
     */
    private $notificationClient;

    public function __construct(NotificationClientInterface $notificationClient) 
    {
        $this-&gt;notificationClient = $notificationClient;
    }

    public function __invoke(Request $request)
    {
        // Please do better in your code! :)
        $body = \json_decode($request-&gt;getContent(), true);

        // RealTimeMessage class provides you with constants for each available status
        $status = $body['status'] ?? RealTimeMessage::STATUS_READ;

        $this-&gt;notificationClient-&gt;updateMessagesStatus($body['messages'], $status);

        return new JsonResponse([], 204);
    }
}</code></pre>
<p><br></p>
<h3>Delete messages</h3>
<p>The <code>NotificationClientInterace</code> allows you to delete specific messages. This is useful for the end user
to remove messages from the list.</p>
<pre><code class="language-php">// src/Http/Controller/NotificationDeleteMessage.php

namespace App\Http\Controller;

use EonX\EasyNotification\Interfaces\NotificationClientInterface;
use Symfony\Component\HttpFoundation\JsonResponse;

final class NotificationDeleteMessage
{
    /**
     * @var \EonX\EasyNotification\Interfaces\NotificationClientInterface
     */
    private $notificationClient;

    public function __construct(NotificationClientInterface $notificationClient) 
    {
        $this-&gt;notificationClient = $notificationClient;
    }

    public function __invoke(string $messageId)
    {
        $this-&gt;notificationClient-&gt;deleteMessage($messageId);

        return new JsonResponse([], 204);
    }
}</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_slack">
                            <h2 class="section-heading">
                                                                    <i class="fab fa-slack"></i>
                                                                Slack Integration
                                <div class="docs-time">
                                    Last Updated: 12/08/2020 16:23:40 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/slack.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>In order to send <a href="https://slack.com/">Slack</a> messages you will need to create an App in your Workspace, make sure you create a Bot user
for this app and request the <code>chat:write</code>, and <code>chat:write:public</code> scopes for its Bot Token. Then add this Bot Token
to your Provider in the EonX Notification service.</p>
<p>That's it! You're all setup to start sending Slack messages within your Workspace!</p>
<p><br></p>
<h3>How To Send Slack Messages</h3>
<p>Sending Slack messages requires installing 3 additional packages, using a python script and certificate signed by
<a href="https://en.wikipedia.org/wiki/Stewart_Butterfield">Stewart Butterfield</a> himself! </p>
<p>Just kidding... Simply use your existing <code>EonX\EasyNotification\Interfaces\NotificationClientInterface</code> service!</p>
<p><br></p>
<h3>Simple Slack Message</h3>
<p>The simplest Slack message is made of a <code>channel</code> and a <code>text</code>.</p>
<pre><code class="language-php">// src/Listener/UserCreatedListener.php

namespace App\Listener;

use App\Entity\User;
use EonX\EasyNotification\Interfaces\ConfigFinderInterface;
use EonX\EasyNotification\Interfaces\NotificationClientInterface;
use EonX\EasyNotification\Messages\SlackMessage;

final class UserCreatedListener
{
    /**
     * @var \EonX\EasyNotification\Interfaces\ConfigFinderInterface
     */
    private $configFinder;

    /**
     * @var \EonX\EasyNotification\Interfaces\NotificationClientInterface
     */
    private $client;

    public function __construct(ConfigFinderInterface $configFinder, NotificationClientInterface $client)
    {
        $this-&gt;configFinder = $configFinder;
        $this-&gt;client = $client;
    }

    public function created(User $user): void
    {
        $config = $this-&gt;configFinder-&gt;find('my-api-key', 'my-provider-external-id');

        /**
         * Define channel. It can be a direct message to a user "@user" or a public channel "#channel".
         */
        $channel = \sprintf('@%s.%s', $user-&gt;getFirstName(), $user-&gt;getLastName());

        /**
         * Simple text.
         */
        $text = \sprintf('We are to have you onboard %s', $user-&gt;getUsername());

        $this-&gt;client
             -&gt;withConfig($config) // Set config for next send
             -&gt;send(SlackMessage::create($channel, $text)); // Send Slack time message
    }
}</code></pre>
<h3>Advanced Formatted Slack Message</h3>
<p>Slack offers a great panel of advanced formatting when sending messages. Checkout the <a href="https://app.slack.com/block-kit-builder">Block Kit Builder</a> to see
what you can do for your messages.</p>
<p>The <code>SlackMessage</code> object allows you to pass the formatting options as an associative array to define the <code>body</code> of the
message. This package doesn't come with helpers to build these advanced formatted messages as other packages are already
doing it very well such as:</p>
<ul>
<li><a href="https://github.com/symfony/slack-notifier">Symfony Slack Notifier</a></li>
<li><a href="https://github.com/maknz/slack">Maknz Slack</a></li>
</ul>
<pre><code class="language-php">$slackOptions = [
    "blocks" =&gt; [
        [
            "type" =&gt;"section",
            "text" =&gt; [
                "type" =&gt; "mrkdwn",
                "text" =&gt; "This is a section block with a button.",
            ],
            "accessory" =&gt; [
                "type" =&gt; "button",
                "text" =&gt; [
                    "type" =&gt; "plain_text",
                    "text" =&gt; "Click Me",
                    "emoji" =&gt; true,
                ],
                "value" =&gt; "click_me_123",
            ],
        ],
    ],
];

$slackMessage = SlackMessage::create('@channel', 'Simple text', $slackOptions);</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_symfony_install">
                            <h2 class="section-heading">
                                                                    <i class="fab fa-symfony"></i>
                                                                Symfony
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/symfony/install.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <h3>Register Bundle</h3>
<p>If you're using <a href="https://flex.symfony.com/">Symfony Flex</a>, this step has been done automatically for you. If not, you can register the bundle
yourself:</p>
<pre><code class="language-php">// config/bundles.php

return [
    // Other bundles ...

    EonX\EasyNotification\Bridge\Symfony\EasyNotificationBundle::class =&gt; ['all' =&gt; true],
];</code></pre>
<p><br></p>
<h3>Configuration</h3>
<p>The only required configuration is the API URL of the EonX Notification service your application is working with.</p>
<pre><code class="language-yaml"># config/packages/easy_notification.yaml

easy_notification:
    api_url: '%env(EONX_NOTIFICATION_API_URL)%'

    # You can optionally customise the expiry time for the cached config here.
    config_expires_after: 500 # Number of seconds</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_symfony_cache_config_finder">
                            <h2 class="section-heading">
                                                                CacheConfigFinder In Symfony
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/symfony/cache_config_finder.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <h3>Override Config Cache in YAML</h3>
<p>Most Symfony projects are still using YAML to define their services. You can override the config cache strategy in YAML:</p>
<pre><code class="language-yaml"># config/services.yaml

easy_notification.config_cache:
    class: Symfony\Component\Cache\Adapter\PhpFilesAdapter
    arguments:
        $namespace: 'eonx_notification_config'</code></pre>
<p><br></p>
<h3>Override Config Cache in PHP</h3>
<p>If your Symfony project is using PHP to define its services, the service id to override is provided to you via
a constant on <code>EonX\EasyNotification\Bridge\BridgeConstantsInterface</code>.</p>
<pre><code class="language-php">// config/services.php

use EonX\EasyNotification\Bridge\BridgeConstantsInterface;
use Symfony\Component\Cache\Adapter\PhpFilesAdapter;
use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;

return static function (ContainerConfigurator $container): void {
    $services = $container-&gt;services();

    $services
        -&gt;set(BridgeConstantsInterface::SERVICE_CONFIG_CACHE, PhpFilesAdapter::class)
        -&gt;arg('$namespace', 'eonx_notification_config');
};</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_laravel_install">
                            <h2 class="section-heading">
                                                                    <i class="fab fa-laravel"></i>
                                                                Laravel/Lumen
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/laravel/install.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <h3>Package Service Provider</h3>
<p>Once the package required, you must tell your application to use it. Laravel uses service providers to do so, if you are
not familiar with this concept make sure to have a look at the <a href="https://laravel.com/docs/5.8/providers">documentation</a>.</p>
<pre><code class="language-php">// config/app.php

'providers' =&gt; [
    // Other Service Providers...

    \EonX\EasyNotification\Bridge\Laravel\EasyNotificationServiceProvider::class
],</code></pre>
<h4>Lumen Actions Required</h4>
<p>To install this package in a Lumen application the procedures are a bit different.</p>
<h5>Register Service Provider</h5>
<p>In a Lumen application you must explicitly tell the application to register the package's service provider as following:</p>
<pre><code class="language-php">// bootstrap/app.php

$app = new Laravel\Lumen\Application(\dirname(__DIR__));

// Other actions...

$app-&gt;register(\EonX\EasyNotification\Bridge\Laravel\EasyNotificationServiceProvider::class);</code></pre>
<h3>Configuration</h3>
<p>The only required configuration is the API URL of the EonX Notification service your application is working with.</p>
<pre><code class="language-php">// config/easy-notification.php

return [
    'api_url' =&gt; \env('EONX_NOTIFICATION_API_URL', 'https://api.url.com'),

    // You can optionally customise the expiry time for the cached config here.
    'config_expires_after' =&gt; 500, // Number of seconds
]; </code></pre>
<h4>Configuration in Lumen</h4>
<p>In Lumen, you will need to explicitly call configure for this package:</p>
<pre><code class="language-php">// bootstrap/app.php

$app = new \Laravel\Lumen\Application(\realpath(\dirname(__DIR__)));

// ...

$app-&gt;configure('easy-notification');

// ...</code></pre>

                            <br>
                        </section>
                        <br>
                                            <section class="docs-section" id="eonx-com_easy-notification_docs_laravel_cache_config_finder">
                            <h2 class="section-heading">
                                                                CacheConfigFinder In Laravel
                                <div class="docs-time">
                                    Last Updated: 11/08/2020 14:34:23 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyNotification/docs/laravel/cache_config_finder.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>Once all dependencies installed, you can override the default config caching within the service provider of your choice.
The service id to override is provided to you via a constant on <code>EonX\EasyNotification\Bridge\BridgeConstantsInterface</code>.</p>
<pre><code class="language-php">// app/Providers/NotificationServiceProvider.php

use EonX\EasyNotification\Bridge\BridgeConstantsInterface;
use Illuminate\Support\ServiceProvider;
use Symfony\Component\Cache\Adapter\PhpFilesAdapter;
use Symfony\Contracts\Cache\CacheInterface;

class NotificationServiceProvider extends ServiceProvider
{
    public function register(): void
    {
        $this-&gt;app-&gt;singleton(BridgeConstantsInterface::SERVICE_CONFIG_CACHE, static function(): CacheInterface {
            return new PhpFilesAdapter('eonx_notification_config');
        });
    }
}</code></pre>

                            <br>
                        </section>
                        <br>
                                    </article>
            </div>
        </div>
    </div>
    </body>
</div>

        

    <script src="/assets/js/jquery-3.4.1.min.js"></script>
    <script src="/assets/js/jquery.scrollTo.min.js"></script>
    <script src="/assets/js/popper.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>


    <script src="/assets/js/docs.js"></script>

    <script>
        $('pre').addClass('line-numbers');

        $(function (){
            $('.code-toolbar').addClass('shadow-sm');
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <script src="/assets/js/prism.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147626313-4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-147626313-4');
</script>
</html>
