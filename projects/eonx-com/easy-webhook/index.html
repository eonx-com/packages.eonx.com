<!DOCTYPE html>
<html lang="en">
<head>
    <title>EonX Docs</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
    <script defer src="https://kit.fontawesome.com/955de18180.js" crossorigin="anonymous"></script>

    <link rel="icon" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512-70x70.png" sizes="32x32">
    <link rel="icon" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512.png" sizes="192x192">
    <link rel="apple-touch-icon-precomposed" href="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-512.png">

                

        <link id="theme-style" rel="stylesheet" href="/assets/css/theme.css">
    

    <link id="theme-style" rel="stylesheet" href="/assets/css/theme.css">
    <link id="theme-style" rel="stylesheet" href="/assets/css/prism.css">
</head>

<div id="app">
        <body class="docs-page">
    <header class="header fixed-top">
        <div class="branding docs-branding">
            <div class="container-fluid position-relative py-2">
                <div class="docs-logo-wrapper">
                    <button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible mr-2 d-xl-none"
                            type="button">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <div class="site-logo">
                        <a class="navbar-brand" href="/">
                            <img class="logo-icon mr-2"
                                 src="https://39cszd96rb9jntgd3r2cirij-wpengine.netdna-ssl.com/wp-content/uploads/2019/09/eonx-logo@1x.png"
                                 alt="logo">
                        </a>
                    </div>
                </div><!--//docs-logo-wrapper-->
                <div class="docs-top-utilities d-flex justify-content-end align-items-center">
                    <div class="top-search-box d-none d-lg-flex">
                        <form class="search-form">
                            <input type="text" placeholder="Search the docs..." name="search"
                                   class="form-control search-input">
                            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i>
                            </button>
                        </form>
                    </div>

                                                                                                                                                            </div><!--//docs-top-utilities-->
            </div><!--//container-->
        </div><!--//branding-->
    </header><!--//header-->

        <div class="docs-wrapper">
        <div id="docs-sidebar" class="docs-sidebar">
            <nav id="docs-nav" class="docs-nav navbar">
                <ul class="section-items list-unstyled nav flex-column pb-3">
                    <li class="nav-item section-title">
                        <a class="nav-link scrollto active" href="#intro">
                        <span class="theme-icon-holder mr-2">
                            <i class="fas fa-cubes"></i>
                        </span>
                            eonx-com/easy-webhook
                        </a>
                    </li>

                                            <li class="nav-item ">
                            <a class="nav-link scrollto" href="#eonx-com_easy-webhook_readme">
                                
                                Introduction
                            </a>
                        </li>
                                    </ul>
            </nav>
        </div>
        <div class="docs-content">
            <div class="container">
                <article class="docs-article" id="intro">
                    <header class="docs-header">
                                                <h1 class="docs-heading">
                            eonx-com/easy-webhook
                            <a href="https://github.com/eonx-com/easy-monorepo"><i class="fa fa-github"></i></a>
                        </h1>
                        <section class="docs-intro">
                            <p>Sending webhooks has never been so easy (persistence, retry, async)</p>
                        </section>
                    </header>

                                            <section class="docs-section" id="eonx-com_easy-webhook_readme">
                            <h2 class="section-heading">
                                                                Introduction
                                <div class="docs-time">
                                    Last Updated: 24/07/2020 07:33:30 -
                                    <a href="https://github.com/eonx-com/easy-monorepo/edit/master/packages/EasyWebhook/readme.md" target="_blank" title="Edit on Github">
                                        Edit on github <i class="fa fa-github"></i>
                                    </a>
                                </div>
                            </h2>

                            <p>Send webhooks asynchronously, retry if it fails, and persist them into the store of your choice, all that out of the box!</p>
<h3>Require package (Composer)</h3>
<p>The recommended way to install this package is to use <a href="https://getcomposer.org/">Composer</a>:</p>
<pre><code class="language-bash">$ composer require eonx-com/easy-webhook</code></pre>
<p><br></p>
<h3>Usage</h3>
<p>The webhook client to send webhooks is automatically registered within the service container, so you can use
dependency injection to access the fully configured client easily.</p>
<pre><code class="language-php">// MyService.php

use EonX\EasyWebhook\Interfaces\WebhookClientInterface;
use EonX\EasyWebhook\Webhook;

final class MyService
{
    /**
     * @var \EonX\EasyWebhook\Interfaces\WebhookClientInterface
     */
    private $webhookClient;

    public function __construct(WebhookClientInterface $webhookClient) 
    {
        $this-&gt;webhookClient = $webhookClient;
    }

    public function send(): void
    {
        // Create simple webhook with limited config
        $webhook = Webhook::create('https://eonx.com/webhook', ['event' =&gt; 'showcase'], 'PUT');

        // Create webhook from array
        $webhook = Webhook::fromArray([
            'url' =&gt; 'https://eonx.com/webhook',
            'body' =&gt; ['event' =&gt; 'showcase'],
            'method' =&gt; 'PUT',
            'max_attempt' =&gt; 5,
        ]);

        // Create webhook using fluent setters
        $webhook = (new Webhook())
            -&gt;url('https://eonx.com/webhook')
            -&gt;body(['event' =&gt; 'showcase'])
            -&gt;method('PUT')
            -&gt;maxAttempt(5);

        // Send the webhook
        $this-&gt;webhookClient-&gt;sendWebhook($webhook);
    }
}</code></pre>
<p>If not set the default method of a webhook is <code>POST</code>.</p>
<p><br></p>
<h3>Send webhooks asynchronously</h3>
<p>By default, this package will send webhooks asynchronously if possible. This logic can be changed for every webhook
at the configuration level by setting <code>send_async = false</code>. It can also be changed for specific webhook using the
<code>sendNow()</code> method.</p>
<pre><code class="language-php">$webhookClient-&gt;sendWebhook(Webhook::create('https://eonx.com')-&gt;sendNow());</code></pre>
<p><br></p>
<h3>Webhook Configurators</h3>
<p>This package has concept of webhook configurators which are used every time a webhook is sent. This mechanism is used
internally to format the request body as an example. Configurators can also be used by the applications for manipulating
every webhooks before sending them.</p>
<p>A webhook configurator is a service implementing <code>EonX\EasyWebhook\Interfaces\WebhookConfiguratorInterface</code>. </p>
<p style="display: none;"></p>
<div class="callout-block callout-block-success"><div class="content">
<h4 class="callout-title"><span class="callout-icon-holder mr-1">
<i class="fa fa-thumbs-up"></i>
<span>Tip</span>
</span></h4>
<div><p>Depends on the framework used by the application, the configurators might be automatically injected in the webhook
client or you might have to manually tag them when registering them.</p></div>
</div></div>
<p>The configurators are executed according to their priority, the higher the priority is and the later the configurator
will be executed. The default configurators of this package have a priority of <code>5000</code>.</p>
<p>Here is how you would add a custom header to every webhook sent:</p>
<pre><code class="language-php">use EonX\EasyWebhook\Configurators\AbstractWebhookConfigurator;
use EonX\EasyWebhook\Interfaces\WebhookInterface;

/**
 * Extend the AbstractWebhookConfigurator so you don't have to worry about priority.
 */
final class MyCustomHeaderWebhookConfigurator extends AbstractWebhookConfigurator
{
    public function configure(WebhookInterface $webhook): void
    {
        $webhook-&gt;mergeHttpClientOptions([
            'headers' =&gt; [
                'X-My-Header' =&gt; 'my-value',
            ],
        ]);
    }
}</code></pre>
<p><br></p>
<h3>Webhook Result store</h3>
<p>This package allows you to store webhook results within the persisting layer of your choice. By default, it will not
store them anywhere.</p>
<p>To change the storing logic, simply override the <code>EonX\EasyWebhook\Interfaces\WebhookResultStoreInterface</code> service
with you own.</p>
<p style="display: none;"></p>
<div class="callout-block callout-block-success"><div class="content">
<h4 class="callout-title"><span class="callout-icon-holder mr-1">
<i class="fa fa-thumbs-up"></i>
<span>Tip</span>
</span></h4>
<div><p>This package comes with a Doctrine DBAL store implementation you can use by simply providing it with your own connection.
This store will persist each extra information on the webhook as a separate column.</p></div>
</div></div>

                            <br>
                        </section>
                        <br>
                                    </article>
            </div>
        </div>
    </div>
    </body>
</div>

        

    <script src="/assets/js/jquery-3.4.1.min.js"></script>
    <script src="/assets/js/jquery.scrollTo.min.js"></script>
    <script src="/assets/js/popper.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>


    <script src="/assets/js/docs.js"></script>

    <script>
        $('pre').addClass('line-numbers');

        $(function (){
            $('.code-toolbar').addClass('shadow-sm');
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <script src="/assets/js/prism.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147626313-4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-147626313-4');
</script>
</html>
